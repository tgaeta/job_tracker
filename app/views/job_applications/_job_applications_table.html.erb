<%= turbo_frame_tag "job_applications_table" do %>
  <div class="overflow-x-auto bg-white shadow-md rounded-lg">
    <% if @job_applications.any? %>
      <table class="w-full">
        <thead class="text-xs bg-gray-100 text-left font-semibold text-gray-600 w-8 border-b-2">
          <tr>
            <th class="px-5 py-3 w-8">
              <%= sort_link_to 'Applied', 'date_applied' %>
            </th>
            <th class="px-5 py-3 w-48">
              <%= sort_link_to 'Company', 'company_name' %>
            </th>
            <th class="px-5 py-3 w-48">
              <%= sort_link_to 'Position', 'position_title' %>
            </th>
            <th class="px-5 py-3">
              Type
            </th>
            <th class="px-5 py-3 w-48">
              Contact Method
            </th>
            <th class="px-5 py-3 w-48">
              P.o.C.
            </th>
            <th class="px-5 py-3 w-96">
              Email
            </th>
            <th class="px-5 py-3">
              <%= sort_link_to 'Claimed', 'claimed_for_unemployment' %>
            </th>
            <th class="px-5 py-3">
              <%= sort_link_to 'Status', 'status' %>
            </th>
            <th class="px-5 py-3">
              <%= sort_link_to 'Location', 'location' %>
            </th>
            <th class="px-5 py-3">
              Website
            </th>
            <th class="px-5 py-3">
              Actions
            </th>
          </tr>
        </thead>
        <tbody id="job_applications">
          <%= render partial: 'job_application', collection: job_applications %>
        </tbody>
      </table>
    <% else %>
      <div class="text-center py-10">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z" />
        </svg>
        <p class="mt-1 text-sm text-gray-500">
          <%= "No results match your search criteria." if params[:search].present? || params[:method_of_contact].present? || params[:position_type].present? %>
        </p>
        <p class="mt-1 mb-4 text-sm text-gray-500">
          <%= "No job applications. Add your first job application now" if job_applications.blank? %>
        </p>
        <%= link_to 'New Job Application', new_job_application_path, class: 'text-sm bg-blue-600 hover:bg-blue-700 text-white mt-4 font-bold py-2 px-4 rounded cursor-pointer', data: { turbo_frame: "_top" } %>
      </div>
    <% end %>
  </div>
<% end %>
